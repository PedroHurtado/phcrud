"use strict";!function(a){var b;a&&(b=a.module("phCrud",["ngRoute"]),b.isEmpty=a.isEmpty||function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0})}(window.angular),function(a,b){function c(c,d,e,f){function g(){var a;return s.as?(a=c[s.as])?a:c[s.as]={}:c}function h(){t.model={}}function i(){t.phEval=v(c,c.$eval)}function j(){if(s.regexPath){var a=s.regexPath.regexp.exec(d.path);a&&(s.path=d.path)}}function k(a,b){t[a]=function(){s.ajaxCmd===a&&j(),b.call(t,s,arguments)}}function l(){u(["config","before","success","error","auto"],function(a){var b=s[a];u(b,function(a,c){w(a)&&(b[c]=v(t,a))})})}function m(){u(s.cmd,function(a,b){w(a)&&k(b,a)})}function n(){s.init&&t.phEval(s.init)}function o(){s.cacheKey}function p(){x(f)||(t.params=f)}function q(a){s.regexPath?d.$observe("path",function(b){var c=s.regexPath.regexp.exec(b);c&&(s.path=b,a())}):a()}function r(){var a=s.cmd&&s.cmd[s.auto]?t[s.auto]:b;w(a)&&q(a)}var s=e(d.options,d.override,d.path),t=g(),u=angular.forEach,v=angular.bind,w=angular.isFunction,x=a.isEmpty;h(),i(),l(),m(),n(),p(),o(),r()}function d(){return{restrict:"EA",scope:!0,dynamicScope:function(a){var b=a.scope;return b?"true"===b.toLowerCase()?!0:!1:!0},controller:c}}c.$inject=["$scope","$attrs","phResolveFactory","$routeParams"],a.directive("phAjax",d)}(angular.module("phCrud")),function(a){function b(a){var b=a("phCache");return{get:b.get,put:b.put,remove:b.remove,removeAll:b.removeAll,pop:function(a){var b=this.get(a);return b&&this.remove(a),b}}}b.$inject=["$cacheFactory"],a.factory("phCacheFactory",b)}(angular.module("phCrud")),function(a){function b(a,b,c,d){function e(){a.history.back()}return{hide:b.hide,status:c.setStatus,assignModel:d.assignModel,back:e}}function c(a){return{accept:a.accept,close:function(){window.history.back()}}}b.$inject=["$window","phSpinnerFactory","phStatusFactory","phCreateModelFactory"],c.$inject=["phAcceptFactory","$window"],a.factory("phSuccessFactoryCreate",b),a.factory("phCommandCreate",c),a.factory("phCreate",function(){return{as:"create",method:"post",service:"phHttpFactory",cacheService:"phCacheFactory",cache:'["model"]',before:"phBeforeHttpFactory",success:"phSuccessFactoryCreate",error:"phErrorHttpFactory",cmd:"phCommandCreate",ajaxCmd:"accept"}})}(angular.module("phCrud")),function(a){function b(a,b){return{hide:b.hide,back:function(){a.history.back()}}}b.$inject=["$window","phSpinnerFactory"],a.factory("phSucessFactoryDelete",b),a.factory("phDelete",function(){return{as:"delete",method:"delete",service:"phHttpFactory",before:"phBeforeHttpFactory",success:"phSucessFactoryDelete",error:"phErrorHttpFactory",cmd:"phCommandCreate",ajaxCmd:"accept"}})}(angular.module("phCrud")),function(a){function b(a,b,c){return{hide:a.hide,status:b.setStatus,assingModel:c.assingModel}}b.$inject=["phSpinnerFactory","phStatusFactory","phCreateModelFactory"],a.factory("phSuccessFactoryEdit",b),a.factory("phEdit",function(){return{as:"edit",method:"get",service:"phHttpFactory",cacheService:"phCacheFactory",cache:'["model"]',before:"phBeforeHttpFactory",success:"phSuccessFactoryIndex",error:"phErrorHttpFactory",cmd:"phAcceptFactory",auto:"accept"}})}(angular.module("phCrud")),function(a){function b(){function a(){this.show=!1}function b(){this.show=!0}return{hide:a,show:b}}function c(){function a(a){this.status=a.status}return{setStatus:a}}function d(){function a(a){angular.extend(this.model,a.data||{})}return{assignModel:a}}function e(){function a(a){var b=this.phEval(a.fields||"")||this.filter||this.model||{};a.service(a.path,b)}return{accept:a}}function f(a){return{show:a.show}}function g(a,b){return{hide:a.hide,setStatus:b.setStatus}}b.$inject=[],c.$inject=[],d.$inject=[],e.$inject=[],f.$inject=["phSpinnerFactory"],g.$inject=["phSpinnerFactory","phStatusFactory"],a.factory("phSpinnerFactory",b),a.factory("phStatusFactory",c),a.factory("phCreateModelFactory",d),a.factory("phAcceptFactory",e),a.factory("phBeforeHttpFactory",f),a.factory("phErrorHttpFactory",g),a.constant("accept","accept")}(angular.module("phCrud")),function(a){function b(a){function b(a,b){i(a,function(a){l(a)&&(b?a(b):a())})}function c(a){return"query"===a?"get":a}function d(a,b){return"query"===a?{params:b}:{data:b}}function e(a,b,c,d){return{data:a,status:b,headers:c,config:d}}function f(c,d,f,g){b(d),a(c).success(function(a,c,d,g){b(f,e(a,c,d,g))}).error(function(a,c,d,f){b(g,e(a,c,d,f))})}function g(){i(arguments,function(a){j[a]=function(b,c,d,e){return function(g){f(k({method:a,url:g},b||{}),c,d,e)}}})}function h(){i(arguments,function(a){j[a]=function(b,e,g,h){return function(i,j){f(k(k({method:c(a),url:i},d(a,j)),b||{}),e,g,h)}}})}var i=angular.forEach,j={},k=angular.extend,l=angular.isFunction;return g("get","delete"),h("post","put","query"),j}b.$inject=["$http"],a.factory("phHttpFactory",b)}(angular.module("phCrud")),function(a){function b(a,b,c){return{hide:a.hide,status:b.setStatus,assignModel:c.assignModel}}function c(a){function b(a){this.filter.page++,this.accept(a)}function c(a){0!==this.filter.page&&(this.filter.page--,this.accept(a))}return{accept:a.accept,nextPage:b,previousPage:c}}b.$inject=["phSpinnerFactory","phStatusFactory","phCreateModelFactory"],c.$inject=["phAcceptFactory"],a.factory("phSuccessFactoryIndex",b),a.factory("phCommandIndex",c),a.factory("phIndex",function(){return{as:"index",init:"index.filter={page:0,records:20}",method:"query",service:"phHttpFactory",cacheService:"phCacheFactory",cache:'["filter"]',before:"phBeforeHttpFactory",success:"phSuccessFactoryIndex",error:"phErrorHttpFactory",cmd:"phCommandIndex",auto:"accept"}})}(angular.module("phCrud")),function(a){a.factory("phPut",function(){return{as:"put",init:"put.model=edit.model",method:"put",service:"phHttpFactory",before:"phBeforeHttpFactory",success:"phSuccessFactoryCreate",error:"phErrorHttpFactory",cmd:"phCommandCreate",ajaxCmd:"accept"}})}(angular.module("phCrud")),function(a,b){function c(a,c,d,e){function f(f,g){var h=angular.forEach,i=angular.extend;return h(["config","before","success","error","cmd","auto","service","cacheService"],function(c){f[c]=f[c]?a.get(f[c]):b}),f.service&&f.method&&(f.service=f.service[f.method](f.config,f.before,f.success,f.error)),f.cache&&(f.cache=c(f.cache)(),f.cacheKey=f.cacheKey||e.path()+(f.as||"")),i(f,d.resolve(g))}return function(b,d,e){var g=a.has(b)?a.get(b):c(b)()||{},d=c(d)()||{};return f(angular.extend(g,d),e)}}c.$inject=["$injector","$parse","phResolvePathService","$location"],a.factory("phResolveFactory",c)}(angular.module("phCrud")),function(a){function b(a){function b(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}this.resolve=function(c){return c?c&&-1===c.indexOf("{{")?{path:c}:{path:c,regexPath:b(c.replace(/\{+/g,":").replace(/\}+/g,"").replace(/\./g,""),{caseInsensitiveMatch:!0})}:{path:a.path()}}}b.$inject=["$location"],a.service("phResolvePathService",b)}(angular.module("phCrud"));
//# sourceMappingURL=phcrud.map